webpackJsonp([13,17],{1063:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(155),n=a.n(r),i=a(30),o=a.n(i),s=a(105),d=a.n(s),l=a(29),c=a.n(l),u=a(63),p=a.n(u),A=a(220),h=a(47),m=a(106),C=a(833),g=a.n(C),v=a(223),f=a.n(v),b=a(28);e.default={data:function(){return{fullscreenLoading:!1,productList:{},Cropper:{show:!1},Pic:{url:""},DICT:{PriceUnits:A.a.PriceUnits,StockUnits:A.a.StockUnits,SupplyType:A.a.SupplyType,userType:A.a.userType,PublishStatus:A.a.PublishStatus,isStock:A.a.isStock},productForm:{},searchVal:"",chooseItem:[],checkAll:"",Params:{publishStatuss:0,pageSize:10,productNo:null,pageNo:1,categorys:[]},searchStatus:!0,ParamsSearchImg:{pageNo:1,pageSize:10,id:""},Filter:{categorys:null,publishStatuss:0},ConfirmDialog:{noShowDialog:!1,show:!1,id:[]},BatchUpload:{dialogShow:!1,validateForm:!1,status:"create"},Cookie:{key:"showDelProductDialog",value:1,day:7},ColorDetail:{}}},computed:p()({},a.i(h.a)(["dicTree","userInfo","search","isMemeber","loading"]),{getIsStore:function(){return 2!==this.userInfo.userType},getToTal:function(){return this.productList.platform+this.productList.shop+this.productList.repository},getChooseIemLen:function(){return this.chooseItem.length<=0}}),watch:{Params:{handler:function(t){this.checkAll=!1,this.chooseItem=[],this.loadProductList()},deep:!0}},components:{CropperDialog:f.a,ProductAddForm:g.a},created:function(){var t=this;return c()(o.a.mark(function e(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.i(b._8)(t.Params);case 2:r=e.sent.data.data,t.productList=r,r.list.length>0?t.productList.list=r.list.map(function(t){return d()({},t,{isActive:1})}):(t.Filter=d()({},t.Filter,{publishStatuss:null}),t.Params=d()({},t.Params,{publishStatuss:null})),t.cookie.get(t.Cookie.key)||t.cookie.set(t.Cookie.key,t.Cookie.value,t.Cookie.day,"/");case 6:case"end":return e.stop()}},e,t)}))()},methods:{handleReload:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.ParamsSearchImg=d()({},t.ParamsSearchImg,{pageNo:1}),t.Params.pageNo=1,t.searchStatus=!0,t.loadProductList();case 4:case"end":return e.stop()}},e,t)}))()},loadProductList:function(){var t=this;return c()(o.a.mark(function e(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.i(b._8)(t.Params);case 2:r=e.sent.data.data,t.$nextTick(function(){t.productList=r,t.productList.list&&(t.productList.list=r.list.map(function(t){return d()({},t,{isActive:1,loading:!1,carousel:0})}))});case 4:case"end":return e.stop()}},e,t)}))()},handleUpOrEditPro:function(t,e){var r=this;return c()(o.a.mark(function n(){var i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("create"!==e){n.next=7;break}return n.next=3,a.i(b._9)({product:t,classId:t[0].classId});case 3:i=n.sent,i.data.code||(r.Filter={publishStatuss:0}),n.next=9;break;case 7:return n.next=9,a.i(b._10)(t);case 9:r.loadProductList();case 10:case"end":return n.stop()}},n,r)}))()},uploadProduct:function(t){var e=this;return c()(o.a.mark(function a(){var r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.map(function(t,a){return d()({},e.productForm,{defaultPicUrl:m.b+t.storeAs,productNo:t.name,publishStatus:0})}),e.handleUpOrEditPro(r,"create"),e.fullscreenLoading=!1,a.abrupt("return");case 4:case"end":return a.stop()}},a,e)}))()},handleEditProduct:function(t){this.handleUpOrEditPro(t,"edit"),this.BatchUpload.dialogShow=!1},handleSubmitProducts:function(t){this.BatchUpload.dialogShow=!1,this.productForm=t,setTimeout(function(){document.querySelector("#uploadProduct").click()},400)},handleuploadAvatar:function(t){this.BatchUpload.dialogShow=!0,this.BatchUpload.status=t,"edit"===t&&(this.BatchUpload.validateForm=1===this.userInfo.userType)},handleChangeCurrent:function(t){var e=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.searchStatus){a.next=6;break}return e.ParamsSearchImg.pageNo=t,a.next=4,e.$store.dispatch("searchGetResult",e.ParamsSearchImg);case 4:a.next=7;break;case 6:e.Params.pageNo=t;case 7:case"end":return a.stop()}},a,e)}))()},handleChangePageSize:function(t){var e=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.searchStatus){a.next=6;break}return e.ParamsSearchImg.pageSize=t,a.next=4,e.$store.dispatch("searchGetResult",e.ParamsSearchImg);case 4:a.next=7;break;case 6:e.Params.pageSize=t;case 7:case"end":return a.stop()}},a,e)}))()},handleSearch:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.Params=d()({},t.Params,{categorys:[],publishStatuss:null,pageNo:1,productNo:t.Params.productNo.trim()}),t.Filter={categorys:null,publishStatuss:""};case 2:case"end":return e.stop()}},e,t)}))()},handleUpload:function(){if(!this.isMemeber)return void this.$messagebox.alert("成为会员，请联系热线电话：4008013357","你无此权限");this.$refs.input.click()},uploadImg:function(t){var e=this,a=this.$refs.input.files[0];if(a){var r=new FileReader;r.onload=function(){var t=r.result;e.Cropper.show=!0,e.ParamsSearchImg=d()({},e.ParamsSearchImg,{pageNo:1}),e.Pic.url=t},r.readAsDataURL(a),t.target.value=""}else this.$toast("出错")},handleLookProduct:function(t){var e=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.$store.commit("SET_GLOBAL",!1),a.next=4,e.$store.dispatch("getSearchEncoded",{companyId:e.userInfo.companyId,category:t.category,encoded:t.encoded,searchType:Number(e.userInfo.userType+"10")});case 4:a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.error("搜索-BASE64文本出错");case 9:case"end":return a.stop()}},a,e,[[0,6]])}))()},handleGetResult:function(t){var e=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.$store.commit("SET_SEARCH_EMPTY"),e.ParamsSearchImg.id=t,a.prev=2,a.next=5,e.$store.dispatch("searchGetResult",e.ParamsSearchImg);case 5:e.productList.list=e.search.list.map(function(t){return d()({},t,{isActive:1})}),e.searchStatus=!1,e.$store.commit("SET_GLOBAL",!0),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),console.error("传图搜花结果出错");case 13:case"end":return a.stop()}},a,e,[[2,10]])}))()},handleChooseAll:function(t){this.chooseItem=t.target.checked?this.productList.list.map(function(t){return t.id}):[]},handleFilterPublishStatus:function(t){var e=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.Params=d()({},e.Params,{publishStatuss:t,pageNo:1});case 1:case"end":return a.stop()}},a,e)}))()},handleFilterCategorys:function(t){var e=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.Params=d()({},e.Params,{categorys:t?[e.Filter.categorys].map(function(t){return parseInt(t)}):[],pageNo:1});case 1:case"end":return a.stop()}},a,e)}))()},handleShelveProduct:function(t){var e=this;return c()(o.a.mark(function r(){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.i(b._11)({goal:t.goal,ids:[t.ids].join(","),isUp:t.isUp});case 2:e.checkAll=!1,e.chooseItem=[],e.loadProductList();case 5:case"end":return r.stop()}},r,e)}))()},handleShowDialog:function(t){this.ConfirmDialog.id=t,"1"===this.cookie.get(this.Cookie.key)?this.ConfirmDialog.show=!0:this.handleDelProduct()},handleDelProduct:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.i(b._12)({ids:t.ConfirmDialog.id.join(",")});case 2:t.ConfirmDialog.show=!1,t.chooseItem=[],t.checkAll=!1,t.loadProductList();case 6:case"end":return e.stop()}},e,t)}))()},handleCancelDelProduct:function(){this.ConfirmDialog.show=!1,this.cookie.set(this.Cookie.key,this.Cookie.value,this.Cookie.day,"/")},handleEdit:function(t){this.productForm=JSON.parse(n()(t)),this.handleuploadAvatar("edit")},handleTabChange:function(t,e){var a=this;return c()(o.a.mark(function r(){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(2!==e||t.colorCards){r.next=3;break}return r.next=3,a.handleGetColor(t);case 3:t.carousel=0,t.isActive=e;case 5:case"end":return r.stop()}},r,a)}))()},handleNoShowDialog:function(t){this.cookie.set(this.Cookie.key,t,this.Cookie.day,"/")},colorPicList:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=[],r=0,n=t.length;r<n;r+=e)a.push(t.slice(r,r+e));return a},handleGetColor:function(t){var e=this;return c()(o.a.mark(function r(){var n,i;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=!0,n={},r.next=4,a.i(b._0)({productId:t.id});case 4:i=r.sent,i.data.code||(t.loading=!1,n=i.data.data),e.$nextTick(function(){e.productList.list.map(function(a,r,i){a.id===t.id&&t.id&&(e.$set(a,"colorCardsNum",n.length),e.$set(a,"colorCardspic",e.colorPicList(n)),e.$set(a,"colorDetail",n[0]))})});case 7:case"end":return r.stop()}},r,e)}))()},showColorDetail:function(t,e){e.colorDetail=t,e.defaultPicUrl=t.picUrl}}}},1165:function(t,e,a){e=t.exports=a(830)(),e.push([t.i,".warehouse-product-color[data-v-9d7b49d4]{min-height:60px}.warehouse-product-color--number[data-v-9d7b49d4]{color:red;margin:0 2px}.warehouse-product-color--tip[data-v-9d7b49d4]{color:grey}.warehouse-product-color--carousel[data-v-9d7b49d4]{margin:20px auto}.warehouse-product-color--carousel .item .ts-image[data-v-9d7b49d4]{margin:0 10px}.warehouse-product-color--carousel .item .ts-image[data-v-9d7b49d4]:first-child{margin-left:15px}.warehouse-product-color--image[data-v-9d7b49d4]{margin:22px 2px}.warehouse-product-color--row[data-v-9d7b49d4]{padding-top:12px;border-top:1px solid #eaeaea}.warehouse-grid-item[data-v-9d7b49d4]{font-size:12px;display:inline-block;margin-top:10px;border:2px solid #eee;width:100%;-webkit-border-radius:4px;border-radius:4px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:8px}.warehouse-grid-item--flex[data-v-9d7b49d4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:-moz-box;display:flex}.warehouse-grid-item--category[data-v-9d7b49d4]{margin:6px auto;width:120px;display:inline-block;text-align:center}.warehouse-grid-item--container[data-v-9d7b49d4]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;-moz-box-flex:1;flex:1;padding-left:4px;height:160px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.warehouse-grid-item--navbar li[data-v-9d7b49d4]{border:1px solid #eaeaea;-webkit-border-radius:1px;border-radius:1px;margin:0 6px 4px;width:18px;line-height:19px;font-size:12px;text-align:center;-webkit-transition:.3s;-o-transition:.3s;-moz-transition:.3s;transition:.3s;cursor:pointer}.warehouse-grid-item--navbar li.is-active[data-v-9d7b49d4]{border:1px solid #4c93fd;background:#fff;color:#4c93fd}.warehouse-grid-item--status[data-v-9d7b49d4]{position:relative}.warehouse-grid-item--img[data-v-9d7b49d4]{top:0;left:0;position:absolute;z-index:1;width:25%}.warehouse-grid-item--row[data-v-9d7b49d4]{margin-bottom:18px}.warehouse-grid-item--row .ts-col-5[data-v-9d7b49d4]{color:grey;text-align:right}.warehouse-grid-item--row .ts-col-7[data-v-9d7b49d4]{text-align:left;padding-left:10px;max-width:140px;display:inline-block;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.warehouse-grid-item--footer[data-v-9d7b49d4]{text-align:right;padding-top:10px;border-top:1px solid #eaeaea}.warehouse-grid-item--footer button[data-v-9d7b49d4]{margin-right:6px}.warehouse-filter[data-v-9d7b49d4]{margin-bottom:24px}.warehouse-footer[data-v-9d7b49d4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:-moz-box;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;-moz-box-align:center;align-items:center}.warehouse-footer--button button[data-v-9d7b49d4]{margin-right:32px}.warehouse-footer--pagation[data-v-9d7b49d4]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;-moz-box-flex:1;flex:1;text-align:right}.warehouse-table--link[data-v-9d7b49d4]{display:block;text-align:center}.warehouse-dialog p[data-v-9d7b49d4]{text-align:center}.warehouse-dialog--title[data-v-9d7b49d4]{font-size:18px;font-weight:500;margin-bottom:10px}.warehouse-dialog--tip[data-v-9d7b49d4]{font-size:14px}.warehouse-dialog--tip i[data-v-9d7b49d4]{font-size:smaller;color:#3f3f3f}.warehouse-photo--search[data-v-9d7b49d4]{margin:0 20px;min-width:40px}.icon-xiangji[data-v-9d7b49d4]:before{color:#fff}","",{version:3,sources:["/Users/hezhicheng/ts57_PC/src/pages/shopManager/children/warehouses.vue"],names:[],mappings:"AACA,0CACI,eAAgB,CACnB,AACD,kDACI,UAAU,AACV,YAAa,CAChB,AACD,+CACI,UAAY,CACf,AACD,oDACI,gBAAkB,CACrB,AACD,oEACI,aAAc,CACjB,AACD,gFACI,gBAAiB,CACpB,AACD,iDACI,eAAiB,CACpB,AACD,+CACI,iBAAkB,AAClB,4BAA8B,CACjC,AAGD,sCACI,eAAgB,AAChB,qBAAsB,AACtB,gBAAiB,AACjB,sBAAuB,AACvB,WAAY,AACZ,0BAA2B,AACnB,kBAAmB,AAC3B,8BAA+B,AACpB,2BAA4B,AAC/B,sBAAuB,AAC/B,WAAa,CAChB,AACD,4CACI,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,iBAAkB,AAClB,YAAc,CACjB,AACD,gDACI,gBAAiB,AACjB,YAAa,AACb,qBAAsB,AACtB,iBAAmB,CACtB,AACD,iDACI,mBAAmB,AACnB,eAAe,AACX,WAAW,AACJ,gBAAgB,AACnB,OAAO,AACf,iBAAkB,AAClB,aAAc,AACd,8BAA+B,AACpB,2BAA4B,AAC/B,qBAAuB,CAClC,AACD,iDACI,yBAA0B,AAC1B,0BAA2B,AACnB,kBAAmB,AAC3B,iBAAkB,AAClB,WAAY,AACZ,iBAAkB,AAClB,eAAgB,AAChB,kBAAmB,AACnB,uBAAuB,AACvB,kBAAkB,AAClB,oBAAoB,AACpB,eAAgB,AAChB,cAAe,CAClB,AACD,2DACI,yBAAyB,AACzB,gBAAgB,AAChB,aAAc,CACjB,AACD,8CACI,iBAAmB,CACtB,AACD,2CACI,MAAM,AACN,OAAO,AACP,kBAAmB,AACnB,UAAW,AACX,SAAW,CACd,AACD,2CACI,kBAAoB,CACvB,AACD,qDACI,WAAW,AACX,gBAAkB,CACrB,AACD,qDACI,gBAAiB,AACjB,kBAAmB,AACnB,gBAAiB,AACjB,qBAAsB,AACtB,gBAAgB,AAChB,0BAA0B,AACvB,uBAAuB,AAC1B,kBAAmB,CACtB,AACD,8CACI,iBAAkB,AAClB,iBAAkB,AAClB,4BAA8B,CACjC,AACD,qDACI,gBAAkB,CACrB,AACD,mCACI,kBAAmB,CACtB,AACD,mCACI,oBAAoB,AACpB,qBAAqB,AACrB,oBAAoB,AACpB,iBAAiB,AACjB,aAAa,AACb,yBAAyB,AACzB,2BAA2B,AACvB,sBAAsB,AACf,sBAAsB,AACzB,kBAAmB,CAC9B,AACD,kDACI,iBAAkB,CACrB,AACD,6CACI,mBAAmB,AACnB,eAAe,AACX,WAAW,AACJ,gBAAgB,AACnB,OAAO,AACf,gBAAkB,CACrB,AAGD,wCACI,cAAe,AACf,iBAAmB,CACtB,AACD,qCACI,iBAAkB,CACrB,AACD,0CACI,eAAgB,AAChB,gBAAiB,AACjB,kBAAoB,CACvB,AACD,wCACI,cAAgB,CACnB,AACD,0CACI,kBAAmB,AACnB,aAAe,CAClB,AAGD,0CACI,cAAc,AACd,cAAgB,CACnB,AAGD,sCACI,UAAW,CACd",file:"warehouses.vue",sourcesContent:["\n.warehouse-product-color[data-v-9d7b49d4]{\n    min-height:60px;\n}\n.warehouse-product-color--number[data-v-9d7b49d4]{\n    color:red;\n    margin:0 2px;\n}\n.warehouse-product-color--tip[data-v-9d7b49d4]{\n    color: grey;\n}\n.warehouse-product-color--carousel[data-v-9d7b49d4]{\n    margin: 20px auto;\n}\n.warehouse-product-color--carousel .item .ts-image[data-v-9d7b49d4]{\n    margin: 0 10px\n}\n.warehouse-product-color--carousel .item .ts-image[data-v-9d7b49d4]:first-child{\n    margin-left:15px;\n}\n.warehouse-product-color--image[data-v-9d7b49d4]{\n    margin: 22px 2px;\n}\n.warehouse-product-color--row[data-v-9d7b49d4]{\n    padding-top: 12px;\n    border-top: 1px solid #eaeaea;\n}\n.warehouse-grid[data-v-9d7b49d4]{\n}\n.warehouse-grid-item[data-v-9d7b49d4]{\n    font-size: 12px;\n    display: inline-block;\n    margin-top: 10px;\n    border: 2px solid #eee;\n    width: 100%;\n    -webkit-border-radius: 4px;\n            border-radius: 4px;\n    -webkit-box-sizing: border-box;\n               -moz-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 8px;\n}\n.warehouse-grid-item--flex[data-v-9d7b49d4]{\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: -moz-box;\n    display: flex;\n}\n.warehouse-grid-item--category[data-v-9d7b49d4]{\n    margin: 6px auto;\n    width: 120px;\n    display: inline-block;\n    text-align: center;\n}\n.warehouse-grid-item--container[data-v-9d7b49d4]{\n    -webkit-box-flex:1;\n    -webkit-flex:1;\n        -ms-flex:1;\n               -moz-box-flex:1;\n            flex:1;\n    padding-left: 4px;\n    height: 160px;\n    -webkit-box-sizing: border-box;\n               -moz-box-sizing: border-box;\n            box-sizing: border-box;\n}\n.warehouse-grid-item--navbar li[data-v-9d7b49d4]{\n    border: 1px solid #eaeaea;\n    -webkit-border-radius: 1px;\n            border-radius: 1px;\n    margin: 0 6px 4px;\n    width: 18px;\n    line-height: 19px;\n    font-size: 12px;\n    text-align: center;\n    -webkit-transition:.3s;\n    -o-transition:.3s;\n    -moz-transition:.3s;\n    transition: .3s;\n    cursor: pointer\n}\n.warehouse-grid-item--navbar li.is-active[data-v-9d7b49d4]{\n    border:1px solid #4c93fd;\n    background:#fff;\n    color:#4c93fd;\n}\n.warehouse-grid-item--status[data-v-9d7b49d4]{\n    position: relative;\n}\n.warehouse-grid-item--img[data-v-9d7b49d4]{\n    top:0;\n    left:0;\n    position: absolute;\n    z-index: 1;\n    width: 25%;\n}\n.warehouse-grid-item--row[data-v-9d7b49d4]{\n    margin-bottom: 18px;\n}\n.warehouse-grid-item--row .ts-col-5[data-v-9d7b49d4]{\n    color:grey;\n    text-align: right;\n}\n.warehouse-grid-item--row .ts-col-7[data-v-9d7b49d4]{\n    text-align: left;\n    padding-left: 10px;\n    max-width: 140px;\n    display: inline-block;\n    overflow:hidden;\n    -o-text-overflow:ellipsis;\n       text-overflow:ellipsis;\n    white-space:nowrap;\n}\n.warehouse-grid-item--footer[data-v-9d7b49d4]{\n    text-align: right;\n    padding-top: 10px;\n    border-top: 1px solid #eaeaea;\n}\n.warehouse-grid-item--footer button[data-v-9d7b49d4]{\n    margin-right: 6px;\n}\n.warehouse-filter[data-v-9d7b49d4]{\n    margin-bottom:24px;\n}\n.warehouse-footer[data-v-9d7b49d4]{\n    display:-webkit-box;\n    display:-webkit-flex;\n    display:-ms-flexbox;\n    display:-moz-box;\n    display:flex;\n    -webkit-box-align:center;\n    -webkit-align-items:center;\n        -ms-flex-align:center;\n               -moz-box-align:center;\n            align-items:center;\n}\n.warehouse-footer--button button[data-v-9d7b49d4]{\n    margin-right:32px;\n}\n.warehouse-footer--pagation[data-v-9d7b49d4]{\n    -webkit-box-flex:1;\n    -webkit-flex:1;\n        -ms-flex:1;\n               -moz-box-flex:1;\n            flex:1;\n    text-align: right;\n}\n.warehouse-table[data-v-9d7b49d4]{\n}\n.warehouse-table--link[data-v-9d7b49d4]{\n    display: block;\n    text-align: center;\n}\n.warehouse-dialog p[data-v-9d7b49d4]{\n    text-align:center;\n}\n.warehouse-dialog--title[data-v-9d7b49d4]{\n    font-size: 18px;\n    font-weight: 500;\n    margin-bottom: 10px;\n}\n.warehouse-dialog--tip[data-v-9d7b49d4]{\n    font-size: 14px;\n}\n.warehouse-dialog--tip i[data-v-9d7b49d4]{\n    font-size: smaller;\n    color: #3F3F3F;\n}\n.warehouse-photo[data-v-9d7b49d4]{\n}\n.warehouse-photo--search[data-v-9d7b49d4]{\n    margin:0 20px;\n    min-width: 40px;\n}\n.icon-xiangji[data-v-9d7b49d4]{\n}\n.icon-xiangji[data-v-9d7b49d4]:before{\n    color:#fff;\n}\n"],sourceRoot:""}])},1276:function(t,e,a){var r=a(1165);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(831)("1cdfd7b2",r,!0)},1425:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"warehouse",attrs:{"element-loading-text":"请稍候"}},[a("ts-section",[a("div",{slot:"menu"},[a("ts-input",{staticStyle:{width:"30%"},attrs:{placeholder:"输入花型编号搜索"},model:{value:t.Params.productNo,callback:function(e){t.Params.productNo=e},expression:"Params.productNo"}},[a("ts-button",{attrs:{size:"small"},on:{click:t.handleSearch},slot:"append"},[a("i",{staticClass:"icon-sousuo"})])],1),t._v(" "),a("label",[a("ts-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleUpload}},[a("i",{staticClass:"icon-xiangji"})]),t._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"input",attrs:{type:"file",accept:"image/png,image/jpeg"},on:{change:t.uploadImg}})],1),t._v(" "),a("label",{staticStyle:{position:"relative"}},[a("ts-button",{attrs:{type:"warning"},on:{click:function(e){t.handleuploadAvatar("create")}}},[t._v("批量新增花型")]),t._v(" "),a("ts-aliupload",{attrs:{fileType:"3",id:"uploadProduct",multiple:""},on:{begin:function(e){t.fullscreenLoading=!0},doUpload:t.uploadProduct}})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.searchStatus,expression:"searchStatus"}],staticClass:"warehouse-filter"},[a("ts-filter",{attrs:{title:"分类"}},[a("ts-radio-group",{on:{change:t.handleFilterPublishStatus},model:{value:t.Filter.publishStatuss,callback:function(e){t.Filter.publishStatuss=e},expression:"Filter.publishStatuss"}},[a("ts-radio",{attrs:{label:null}},[t._v("全部("+t._s(t.getToTal)+")")]),t._v(" "),t._l(t.DICT.PublishStatus,function(e){return 2!==e.dicValue||t.getIsStore?a("ts-radio",{key:e.value,attrs:{label:e.dicValue}},[2===e.dicValue?a("span",{attrs:{title:e.title}},[t._v(t._s(e.label)+"("+t._s(t.productList.platform)+")")]):t._e(),t._v(" "),1===e.dicValue?a("span",{attrs:{title:e.title}},[t._v(t._s(e.label)+"("+t._s(t.productList.shop)+")")]):t._e(),t._v(" "),0===e.dicValue?a("span",{attrs:{title:e.title}},[t._v(t._s(e.label)+"("+t._s(t.productList.repository)+")")]):t._e()]):t._e()})],2)],1),t._v(" "),a("ts-filter",{attrs:{title:"面料种类"}},[a("ts-radio-group",{on:{change:t.handleFilterCategorys},model:{value:t.Filter.categorys,callback:function(e){t.Filter.categorys=e},expression:"Filter.categorys"}},[a("ts-radio",{attrs:{label:null}},[t._v("全部")]),t._v(" "),t._l(t.dicTree.PRODUCT_TYPE,function(e){return a("ts-radio",{key:e.value,attrs:{label:e.dicValue}},[t._v(t._s(e.name))])})],2)],1)],1),t._v(" "),a("ts-button",{directives:[{name:"show",rawName:"v-show",value:!t.searchStatus,expression:"!searchStatus"}],on:{click:t.handleReload}},[t._v("<< 返回上一级")]),t._v(" "),a("ts-checkbox-group",{model:{value:t.chooseItem,callback:function(e){t.chooseItem=e},expression:"chooseItem"}},[a("ts-row",{attrs:{gutter:10}},t._l(t.productList.list,function(e){return a("ts-col",{key:e.id,staticClass:"warehouse-grid",attrs:{span:12}},[a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"item.loading",modifiers:{body:!0}}],staticClass:"warehouse-grid-item"},[a("ts-row",[a("ts-col",{attrs:{span:7}},[a("div",{staticClass:"warehouse-grid-item--status"},[a("img",{staticClass:"warehouse-grid-item--img",attrs:{src:"/static/images/status/"+e.publishStatus+".png",alt:""}}),t._v(" "),a("ts-image",{attrs:{src:e.defaultPicUrl,width:"120",height:"160"}})],1),t._v(" "),a("span",{staticClass:"warehouse-grid-item--category"})]),t._v(" "),a("ts-col",{attrs:{span:2}},[a("ul",{staticClass:"warehouse-grid-item--navbar"},[a("li",{class:[1===e.isActive?"is-active":""],on:{click:function(a){t.handleTabChange(e,1)}}},[t._v("基本信息")]),t._v(" "),a("li",{class:[2===e.isActive?"is-active":""],on:{click:function(a){t.handleTabChange(e,2)}}},[t._v("花型色卡")])])]),t._v(" "),a("ts-col",{attrs:{span:15}},[1===e.isActive?a("div",{staticClass:"warehouse-grid-item--container"},[a("ts-row",{staticClass:"warehouse-grid-item--row"},[a("ts-col",{attrs:{span:5}},[t._v("面料种类")]),t._v(" "),a("ts-col",{attrs:{span:7}},[t._v(t._s(t._f("filterDict")(e.category,t.dicTree.PRODUCT_TYPE,"name")))]),t._v(" "),a("ts-col",{attrs:{span:5}},[t._v("编号")]),t._v(" "),a("ts-col",{attrs:{span:7,title:e.productNo}},[a("span",[t._v(t._s(e.productNo))])])],1),t._v(" "),a("ts-row",{staticClass:"warehouse-grid-item--row"},[a("ts-col",{attrs:{span:5}},[t._v("大货类型")]),t._v(" "),a("ts-col",{attrs:{span:7}},[a("span",[t._v(t._s(t._f("filterDict")(e.productShape,t.dicTree.PRODUCT_SHAPE,"name"))+" ")])]),t._v(" "),a("ts-col",{attrs:{span:5}},[t._v("分类")]),t._v(" "),a("ts-col",{attrs:{span:7}},t._l(e.classList,function(e){return a("span",[t._v(t._s(e)+" ")])}))],1),t._v(" "),a("ts-row",{staticClass:"warehouse-grid-item--row"},[a("ts-col",{attrs:{span:5}},[t._v("成分")]),t._v(" "),a("ts-col",{attrs:{span:7}},[t._v(t._s(e.ingredient)+" ")]),t._v(" "),a("ts-col",{attrs:{span:5}},[t._v("出码率")]),t._v(" "),a("ts-col",{attrs:{span:7}},[t._v(t._s(e.outRate)+" ")])],1),t._v(" "),a("ts-row",{staticClass:"warehouse-grid-item--row"},[a("ts-col",{attrs:{span:5}},[t._v("幅宽")]),t._v(" "),a("ts-col",{attrs:{span:7}},[t._v(t._s(e.width?e.width+"CM":"")+" ")]),t._v(" "),a("ts-col",{attrs:{span:5}},[t._v("花高")]),t._v(" "),a("ts-col",{attrs:{span:7}},[t._v(t._s(e.height?e.height+"CM":"")+" ")])],1),t._v(" "),a("ts-row",{staticClass:"warehouse-grid-item--row"},[a("ts-col",{attrs:{span:5}},[t._v("剪版价")]),t._v(" "),a("ts-col",{attrs:{span:7}},[e.cutPrice>0&&e.cutPrice?a("span",[t._v("¥"+t._s(e.cutPrice/100)+"/"+t._s(t._f("filterDict")(e.priceUnit,t.dicTree.PRODUCT_UNIT,"name")))]):a("span",[t._v("价格面议")])]),t._v(" "),a("ts-col",{attrs:{span:5}},[t._v("大货价")]),t._v(" "),a("ts-col",{attrs:{span:7}},[e.price>0&&e.price?a("span",[t._v("¥"+t._s(e.price/100)+"/"+t._s(t._f("filterDict")(e.priceUnit,t.dicTree.PRODUCT_UNIT,"name")))]):a("span",[t._v("价格面议")])])],1)],1):a("div",{staticClass:"warehouse-grid-item--container"},[a("p",[t._v("共\n                      "),a("span",{staticClass:"warehouse-product-color--number"},[t._v(t._s(e.colorCardsNum))]),t._v("个花型颜色\n                      "),a("span",{staticClass:"warehouse-product-color--tip"},[t._v("(点击“编辑”按钮配置花型颜色信息)")])]),t._v(" "),a("div",{staticClass:"warehouse-product-color"},[e.colorCardsNum<5?a("div",t._l(e.colorCardspic,function(r){return a("span",t._l(r,function(r){return a("ts-image",{staticClass:"warehouse-product-color--image",attrs:{src:r.picUrl,height:"60",width:"60",canView:!1,disabledHover:""},on:{click:function(a){t.showColorDetail(r,e)}}})}))})):t._e(),t._v(" "),e.colorCardsNum>=5?a("div",[a("ts-carousel",{staticClass:"warehouse-product-color--carousel",attrs:{dots:"never",arrow:"always",arrowType:"square",easing:"linear"},model:{value:e.carousel,callback:function(t){e.carousel=t},expression:"item.carousel"}},t._l(e.colorCardspic,function(r){return a("ts-carousel-item",[a("div",{staticClass:"item"},t._l(r,function(r){return a("ts-image",{attrs:{src:r.picUrl,height:"60",width:"60",canView:!1,disabledHover:""},on:{click:function(a){t.showColorDetail(r,e)}}})}))])}))],1):t._e()]),t._v(" "),a("ts-row",{staticClass:"warehouse-product-color--row"},[a("ts-col",{attrs:{span:5}},[t._v("库存")]),t._v(" "),a("ts-col",{attrs:{span:7}},[t._v(t._s(t._f("filterDict")(e.colorDetail.isStock,t.DICT.isStock)))]),t._v(" "),0!==e.colorDetail.isStock?a("ts-col",{attrs:{span:5}},[t._v("库存数量")]):t._e(),t._v(" "),0!==e.colorDetail.isStock?a("ts-col",{attrs:{span:7}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!!e.colorDetail.stock,expression:"!!item.colorDetail.stock"}]},[t._v("\n                          "+t._s(e.colorDetail.stock)+"/"+t._s(t._f("filterDict")(e.colorDetail.unit,t.DICT.StockUnits))+"\n                        ")])]):t._e()],1)],1)])],1),t._v(" "),a("div",{staticClass:"warehouse-grid-item--footer"},[1!==e.publishStatus?a("ts-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.handleShelveProduct({goal:1,ids:e.id,isUp:!0})}}},[t._v("上架网店")]):t._e(),t._v(" "),2!==e.publishStatus&&t.getIsStore?a("ts-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.handleShelveProduct({goal:2,ids:e.id,isUp:!0})}}},[t._v("上架平台")]):t._e(),t._v(" "),0!==e.publishStatus?a("ts-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.handleShelveProduct({goal:0,ids:e.id})}}},[t._v("下架仓库")]):t._e(),t._v(" "),a("ts-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.handleEdit(e,"edit")}}},[t._v("编辑")]),t._v(" "),a("ts-button",{attrs:{type:"plain",size:"small"},on:{click:function(a){t.handleShowDialog([e.id])}}},[t._v("删除")]),t._v(" "),""!==t.Filter.publishStatuss?a("ts-checkbox",{attrs:{label:e.id}},[t._v(" ")]):t._e()],1)],1)])}))],1),t._v(" "),a("div",{staticClass:"warehouse-footer",slot:"footer"},[a("div",[a("ts-checkbox",{on:{change:t.handleChooseAll},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),t._v("\n         \n        "),null!==t.Filter.publishStatuss?a("span",[2!==t.Filter.publishStatuss&&t.getIsStore?a("ts-button",{attrs:{type:"primary",disabled:t.getChooseIemLen},on:{click:function(e){t.handleShelveProduct({goal:2,ids:t.chooseItem,isUp:!0})}}},[t._v("上架平台")]):t._e(),t._v(" "),1!==t.Filter.publishStatuss?a("ts-button",{attrs:{type:"primary",disabled:t.getChooseIemLen},on:{click:function(e){t.handleShelveProduct({goal:1,ids:t.chooseItem,isUp:!0})}}},[t._v("上架网店")]):t._e(),t._v(" "),0!==t.Filter.publishStatuss?a("ts-button",{attrs:{type:"cancel",disabled:t.getChooseIemLen},on:{click:function(e){t.handleShelveProduct({goal:0,ids:t.chooseItem})}}},[t._v("下架仓库")]):t._e()],1):t._e(),t._v(" "),a("ts-button",{attrs:{type:"cancel",disabled:t.getChooseIemLen},on:{click:function(e){t.handleShowDialog(t.chooseItem)}}},[t._v("删除")])],1),t._v(" "),a("ts-pagination",{staticClass:"warehouse-footer--pagation",attrs:{detail:t.searchStatus,current:t.productList.pageNO,total:t.productList.totalPage},on:{change:t.handleChangeCurrent,"page-size-change":t.handleChangePageSize}})],1)],1),t._v(" "),a("ts-dialog",{staticClass:"warehouse-dialog",attrs:{width:"30%",title:"提示"},on:{confirm:t.handleDelProduct,cancel:t.handleCancelDelProduct},model:{value:t.ConfirmDialog.show,callback:function(e){t.ConfirmDialog.show=e},expression:"ConfirmDialog.show"}},[a("p",{staticClass:"warehouse-dialog--title"},[t._v("确认将选中花型删除？")]),t._v(" "),a("p",[a("ts-radio",{attrs:{type:"origin",label:"0"},nativeOn:{change:function(e){t.handleNoShowDialog(e)}},model:{value:t.ConfirmDialog.noShowDialog,callback:function(e){t.ConfirmDialog.noShowDialog=e},expression:"ConfirmDialog.noShowDialog"}},[a("span",{staticClass:"warehouse-dialog--tip"},[t._v("不再提示"),a("i",[t._v("(花型相关数据删除后无法恢复)")])])])],1)]),t._v(" "),a("ts-dialog",{attrs:{"close-on-click-modal":!t.loading,type:"alert",width:"80%",title:"请选择上传花型的属性（*为必填项）"},on:{close:t.loadProductList},model:{value:t.BatchUpload.dialogShow,callback:function(e){t.BatchUpload.dialogShow=e},expression:"BatchUpload.dialogShow"}},[a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"warehouse-dialog-batchupload"},[a("product-add-form",{attrs:{validate:t.BatchUpload.validateForm,status:t.BatchUpload.status,data:t.productForm},on:{created:t.handleSubmitProducts,edit:t.handleEditProduct}})],1),t._v(" "),a("span",{slot:"footer"})]),t._v(" "),a("cropper-dialog",{attrs:{dialog:t.Cropper,imageUrl:t.Pic.url},on:{check:t.handleLookProduct,change:t.handleGetResult}})],1)},staticRenderFns:[]}},833:function(t,e,a){a(938);var r=a(1)(a(920),a(954),"data-v-a994b382",null);t.exports=r.exports},894:function(t,e,a){a(1276);var r=a(1)(a(1063),a(1425),"data-v-9d7b49d4",null);t.exports=r.exports},920:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(30),n=a.n(r),i=a(105),o=a.n(i),s=a(29),d=a.n(s),l=a(63),c=a.n(l),u=a(155),p=a.n(u),A=a(28),h=a(106),m=a(220),C=a(156),g=a(947),v=a.n(g),f=a(47);e.default={data:function(){return{DICT:{SupplyShapes:m.a.SupplyShapes,PriceUnits:m.a.PriceUnits,StockUnits:m.a.StockUnits,SupplyType:m.a.SupplyType,isStock:m.a.isStock},rules:{productNo:[{required:!0,message:"请输入正确的花型编号"}],category:[{required:!0,message:"请至少选择一个花型分类"}],ingredient:[{required:!0,message:"请至少选择一个花型成分"}],productShape:[{required:!0,message:"请至少选择一个大货类型"}],defaultPicUrl:[{required:!0,message:"请上传一张花型图片",trigger:"change"}]},Pic:{show:!1,text:"添加图片"},ingredientList:[],newIngredients:[],EditIngredient:{content:"",newIngredient:""},Tip:"",CopyDICTUnit:[],userCategory:[],addPatternForm:{category:"",height:"",ingredient:"",isStock:"",outRate:"",classId:"",defaultPicUrl:"",price:"",cutPrice:"",priceUnit:"",productNo:"",publishStatus:"",stock:"",stockUnit:"",width:"",productShape:""},Color:{list:[],detail:{},temp:[]}}},directives:{Clickoutside:C.a},watch:{data:function(t){this.loadData()},addPatternForm:{handler:function(t,e){t.defaultPicUrl&&(this.Pic.text=t.defaultPicUrl?"修改图片":"添加图片",this.Pic.show=!!t.defaultPicUrl),"100013"!==t.category?this.CopyDICTUnit=this.CopyDICTUnit.filter(function(t){return"400012"!==t.dicValue}):"200010"===t.productShape?this.CopyDICTUnit=this.CopyDICTUnit.filter(function(t){return"400011"===t.dicValue}):this.CopyDICTUnit=JSON.parse(p()(this.dicTree.PRODUCT_UNIT)),"200010"===t.productShape?this.CopyDICTUnit=this.CopyDICTUnit.filter(function(t){return"400011"===t.dicValue}):"100013"===t.category?this.CopyDICTUnit=this.dicTree.PRODUCT_UNIT:this.CopyDICTUnit=this.dicTree.PRODUCT_UNIT.filter(function(t){return"400012"!==t.dicValue})},deep:!0}},props:{upLace:{type:Boolean,default:!1},validate:{type:Boolean},status:{type:String},data:{type:Object}},components:{addColor:v.a},computed:c()({},a.i(f.a)(["dicTree","userInfo"]),{hasUserCategory:function(){return this.userCategory.length>0},isCreatedStatus:function(){return"create"===this.status},getClientHeight:function(){return document.documentElement.clientHeight||document.dody.clientHeight},isMain:function(){if(this.addPatternForm.colorDetail)return 1===this.addPatternForm.colorDetail.isMain},prince:{get:function(){return this.addPatternForm.price/100==0||isNaN(this.addPatternForm.price)?"":this.addPatternForm.price/100},set:function(t){this.addPatternForm.price=100*t}},cutPrice:{get:function(){return this.addPatternForm.cutPrice/100==0||isNaN(this.addPatternForm.cutPrice)?"":this.addPatternForm.cutPrice/100},set:function(t){this.addPatternForm.cutPrice=100*t}},classId:function(){var t=this;if(this.userCategory&&this.data.classList.length){return this.userCategory.filter(function(e){return e.className===t.data.classList[0]})[0].id}}}),methods:{loadData:function(){var t=this;return d()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isCreatedStatus){e.next=8;break}return t.$store.commit("SET_LOADING",!0),t.addPatternForm=o()({},t.addPatternForm,t.data,{category:t.data.category&&t.data.category.toString(),productShape:t.data.productShape&&t.data.productShape.toString(),classId:t.classId}),e.next=5,a.i(A._0)({productId:t.addPatternForm.id});case 5:t.Color.list=e.sent.data.data,t.Color.list.length&&(t.Color.detail=t.Color.list[0]),t.$store.commit("SET_LOADING",!1);case 8:case"end":return e.stop()}},e,t)}))()},handleDelIngredient:function(t,e){var r=this;return d()(n.a.mark(function i(){var o,s;return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("newIngredient"!==e?(o=r.ingredientList.findIndex(function(e){return e.id===t.id}),r.ingredientList.splice(o,1)):(s=r.newIngredients.findIndex(function(e){return e.ingredientName===t.ingredientName}),r.newIngredients.splice(s,1)),!t.id){n.next=4;break}return n.next=4,a.i(A._1)({ids:t.id.toString()});case 4:case"end":return n.stop()}},i,r)}))()},handleAddIngredient:function(){var t=this;return d()(n.a.mark(function e(){var r,i,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.EditIngredient.newIngredient)){e.next=7;break}return i=t.newIngredients.findIndex(function(t){return t.ingredientName===r}),o=t.ingredientList.findIndex(function(t){return t.ingredientName===r}),-1===i&&-1===o&&(t.addPatternForm.ingredient=r,t.newIngredients.push({ingredientName:r}),t.EditIngredient.newIngredient=""),e.next=7,a.i(A._2)({ingredientName:r});case 7:case"end":return e.stop()}},e,t)}))()},uploadImg:function(t){this.addPatternForm.defaultPicUrl=h.b+t[0].storeAs},submitForm:function(t){var e=this;this.$refs[t].validate(function(){var r=d()(n.a.mark(function r(i){var o;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!i){r.next=17;break}if(o=JSON.parse(p()(e.addPatternForm)),!e.isCreatedStatus){r.next=7;break}return r.next=5,e.$emit("created",o);case 5:r.next=14;break;case 7:return r.next=9,e.$emit("edit",o);case 9:return r.next=11,e.$emit("editColor",e.Color.temp);case 11:if(!e.Color.temp.length){r.next=14;break}return r.next=14,a.i(A._3)({productId:o.id,colorCards:e.Color.temp});case 14:e.$refs[t].resetFields(),r.next=18;break;case 17:return r.abrupt("return",!1);case 18:case"end":return r.stop()}},r,e)}));return function(t){return r.apply(this,arguments)}}())},handleUpLace:function(t){var e=this;this.$refs[t].validate(function(){var a=d()(n.a.mark(function a(r){var i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!r){a.next=8;break}return e.addPatternForm.isShelve=!e.addPatternForm.isShelve,i=JSON.parse(p()(e.addPatternForm)),a.next=5,e.$emit("upLace",i);case 5:e.$refs[t].resetFields(),a.next=9;break;case 8:return a.abrupt("return",!1);case 9:case"end":return a.stop()}},a,e)}));return function(t){return a.apply(this,arguments)}}())},getColorList:function(t){this.$set(this.addPatternForm,"colorDetail",t),this.Color.detail=t},handleSaveColor:function(t){this.Color.temp=t}},created:function(){var t=this;return d()(n.a.mark(function e(){var r,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.parse(p()(t.dicTree.PRODUCT_UNIT)),t.CopyDICTUnit=r.filter(function(t){return"400012"!==t.dicValue}),t.addPatternForm.priceUnit=t.CopyDICTUnit[0].dicValue,e.next=5,a.i(A.y)({pageNo:1,pageSize:1e3});case 5:return i=e.sent.data.data.list,i.length>0&&(t.userCategory=i),t.loadData(),e.next=10,a.i(A._4)();case 10:t.ingredientList=e.sent.data.data;case 11:case"end":return e.stop()}},e,t)}))()}}},921:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(30),n=a.n(r),i=a(29),o=a.n(i),s=a(28),d=a(220);e.default={data:function(){return{DICT:{isStock:d.a.isStock}}},created:function(){var t=this;return o()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.ColorList.length&&t.$emit("setColorList",t.ColorList[0]);case 1:case"end":return e.stop()}},e,t)}))()},props:["product","unit","ColorList"],computed:{getColorLength:function(){return this.ColorList.length}},methods:{handleDelColor:function(t){var e=this;return o()(n.a.mark(function r(){var i;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.$store.commit("SET_LOADING",!0),r.next=3,a.i(s._5)({id:t.id});case 3:if(i=r.sent,i.data.code){r.next=9;break}return r.next=7,a.i(s._0)({productId:e.product.id});case 7:e.ColorList=r.sent.data.data,e.$store.commit("SET_LOADING",!1);case 9:case"end":return r.stop()}},r,e)}))()},handleSetDefault:function(t){var e=this;return o()(n.a.mark(function r(){var i;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.i(s._6)({productId:e.product.id,id:t.id});case 2:i=r.sent,i.data.code||(e.$nextTick(o()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.i(s._0)({productId:e.product.id});case 2:e.ColorList=t.sent.data.data;case 3:case"end":return t.stop()}},t,e)}))),e.handleChangeCard(t),e.$store.commit("SET_LOADING",!1));case 4:case"end":return r.stop()}},r,e)}))()},handleChangeCard:function(t){this.$emit("setColorList",t)},handleSetColorList:function(){this.$emit("saveColor",this.ColorList)},handleAddColor:function(){document.querySelector("#AddColor").click()},handleAddColorCards:function(t){var e=this;return o()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$store.commit("SET_LOADING",!0);case 2:return r.next=4,a.i(s._7)({productId:e.product.id,picUrls:t.map(function(t){return{picUrl:t.storeAs}})});case 4:return r.next=6,a.i(s._0)({productId:e.product.id});case 6:e.ColorList=r.sent.data.data,e.$store.commit("SET_LOADING",!1);case 8:case"end":return r.stop()}},r,e)}))()}}}},924:function(t,e,a){e=t.exports=a(830)(),e.push([t.i,".red[data-v-4badd514]{color:red}.add-dynamic[data-v-4badd514]{clear:both}.add-dynamic-image[data-v-4badd514]{border:4px solid transparent;-webkit-border-radius:4px;border-radius:4px}.add-dynamic-col[data-v-4badd514]{border:1px solid #eaeaea;-webkit-border-radius:2px;border-radius:2px;margin-top:10px;padding:8px;font-size:12px}.add-dynamic--menu[data-v-4badd514]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:-moz-box;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;-moz-box-pack:justify;justify-content:space-between;margin-bottom:10px}.add-dynamic--button[data-v-4badd514]{height:20px;color:#4c93fd;border:1px solid}.add-dynamic--button.del[data-v-4badd514]{color:red}.add-dynamic--input[data-v-4badd514]{margin-left:50px}","",{version:3,sources:["/Users/hezhicheng/ts57_PC/src/pages/shopManager/children/warehouse/addColor.vue"],names:[],mappings:"AACA,sBACE,SAAW,CACZ,AACD,8BACE,UAAY,CACb,AACD,oCACE,6BAA8B,AAC9B,0BAA2B,AACnB,iBAAmB,CAC5B,AACD,kCACE,yBAA0B,AAC1B,0BAA2B,AACnB,kBAAmB,AAC3B,gBAAiB,AACjB,YAAa,AACb,cAAgB,CACjB,AACD,oCACE,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,iBAAkB,AAClB,aAAc,AACd,yBAA0B,AAC1B,sCAAuC,AACnC,sBAAuB,AAChB,sBAAuB,AAC1B,8BAA+B,AACvC,kBAAoB,CACrB,AACD,sCACE,YAAa,AACb,cAAe,AACf,gBAAkB,CACnB,AACD,0CACE,SAAW,CACZ,AACD,qCACE,gBAAkB,CACnB",file:"addColor.vue",sourcesContent:["\n.red[data-v-4badd514] {\n  color: red;\n}\n.add-dynamic[data-v-4badd514] {\n  clear: both;\n}\n.add-dynamic-image[data-v-4badd514] {\n  border: 4px solid transparent;\n  -webkit-border-radius: 4px;\n          border-radius: 4px;\n}\n.add-dynamic-col[data-v-4badd514] {\n  border: 1px solid #eaeaea;\n  -webkit-border-radius: 2px;\n          border-radius: 2px;\n  margin-top: 10px;\n  padding: 8px;\n  font-size: 12px;\n}\n.add-dynamic--menu[data-v-4badd514] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: -moz-box;\n  display: flex;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n      -ms-flex-pack: justify;\n             -moz-box-pack: justify;\n          justify-content: space-between;\n  margin-bottom: 10px;\n}\n.add-dynamic--button[data-v-4badd514] {\n  height: 20px;\n  color: #4C93FD;\n  border: 1px solid;\n}\n.add-dynamic--button.del[data-v-4badd514] {\n  color: red;\n}\n.add-dynamic--input[data-v-4badd514] {\n  margin-left: 50px;\n}\n\n"],sourceRoot:""}])},929:function(t,e,a){e=t.exports=a(830)(),e.push([t.i,".center[data-v-a994b382]{text-align:center}.add-input[data-v-a994b382]{width:15%;display:inline-block}.add-col[data-v-a994b382]{overflow-x:hidden;overflow-y:auto;padding-right:10px}.add-radio[data-v-a994b382]{display:inline-block;position:relative}.add-radio-close[data-v-a994b382]{top:0;left:-8px;position:absolute;-webkit-border-radius:50%;border-radius:50%;text-align:center;line-height:1;cursor:pointer;background:red;color:#fff;width:16px;height:16px;-webkit-transition:.3s;-o-transition:.3s;-moz-transition:.3s;transition:.3s;z-index:1}.add-radio-close[data-v-a994b382]:hover{background:#bc0303}.add-bottom-button[data-v-a994b382]{display:table;margin:10px auto}.add-bottom-button button[data-v-a994b382]{margin-left:8px}.add-upload-button[data-v-a994b382]{color:#4c93fd;height:38px;line-height:38px;cursor:pointer;-webkit-transition:.5s;-o-transition:.5s;-moz-transition:.5s;transition:.5s;position:relative}.add-upload-button[data-v-a994b382]:hover{color:#105bca}","",{version:3,sources:["/Users/hezhicheng/ts57_PC/src/pages/shopManager/children/warehouse/add.vue"],names:[],mappings:"AACA,yBACE,iBAAmB,CACpB,AACD,4BACE,UAAW,AACX,oBAAsB,CACvB,AACD,0BACE,kBAAmB,AACnB,gBAAiB,AACjB,kBAAoB,CACrB,AACD,4BACE,qBAAsB,AACtB,iBAAmB,CACpB,AACD,kCACE,MAAO,AACP,UAAW,AACX,kBAAmB,AACnB,0BAA2B,AACnB,kBAAmB,AAC3B,kBAAmB,AACnB,cAAe,AACf,eAAgB,AAChB,eAAgB,AAChB,WAAa,AACb,WAAY,AACZ,YAAa,AACb,uBAAwB,AACxB,kBAAmB,AACnB,oBAAqB,AACrB,eAAgB,AAChB,SAAW,CACZ,AACD,wCACE,kBAAoB,CACrB,AAED,oCACE,cAAe,AACf,gBAAkB,CACnB,AACD,2CACE,eAAgB,CACjB,AAED,oCACE,cAAe,AACf,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,uBAAwB,AACxB,kBAAmB,AACnB,oBAAqB,AACrB,eAAgB,AAChB,iBAAmB,CACpB,AACD,0CACE,aAAe,CAChB",file:"add.vue",sourcesContent:["\n.center[data-v-a994b382] {\n  text-align: center;\n}\n.add-input[data-v-a994b382] {\n  width: 15%;\n  display: inline-block;\n}\n.add-col[data-v-a994b382] {\n  overflow-x: hidden;\n  overflow-y: auto;\n  padding-right: 10px;\n}\n.add-radio[data-v-a994b382] {\n  display: inline-block;\n  position: relative;\n}\n.add-radio-close[data-v-a994b382] {\n  top: 0;\n  left: -8px;\n  position: absolute;\n  -webkit-border-radius: 50%;\n          border-radius: 50%;\n  text-align: center;\n  line-height: 1;\n  cursor: pointer;\n  background: red;\n  color: white;\n  width: 16px;\n  height: 16px;\n  -webkit-transition: .3s;\n  -o-transition: .3s;\n  -moz-transition: .3s;\n  transition: .3s;\n  z-index: 1;\n}\n.add-radio-close[data-v-a994b382]:hover {\n  background: #bc0303;\n}\n.add-bottom[data-v-a994b382] {}\n.add-bottom-button[data-v-a994b382] {\n  display: table;\n  margin: 10px auto;\n}\n.add-bottom-button button[data-v-a994b382]{\n  margin-left:8px;\n}\n.add-upload[data-v-a994b382] {}\n.add-upload-button[data-v-a994b382] {\n  color: #4C93FD;\n  height: 38px;\n  line-height: 38px;\n  cursor: pointer;\n  -webkit-transition: .5s;\n  -o-transition: .5s;\n  -moz-transition: .5s;\n  transition: .5s;\n  position: relative;\n}\n.add-upload-button[data-v-a994b382]:hover {\n  color: #105bca;\n}\n"],sourceRoot:""}])},933:function(t,e,a){var r=a(924);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(831)("d8f4af8a",r,!0)},938:function(t,e,a){var r=a(929);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(831)("7e15420f",r,!0)},947:function(t,e,a){a(933);var r=a(1)(a(921),a(949),"data-v-4badd514",null);t.exports=r.exports},949:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ts-menu-table",[a("div",{slot:"header-left"},[a("strong",[t._v("花型色卡信息")]),t._v(" "),a("span",[t._v("(共 "),a("i",{staticClass:"red"},[t._v(t._s(t.getColorLength))]),t._v("个花型颜色，默认被查找花型不能删除)")])]),t._v(" "),a("div",{slot:"header-right"},[a("label",[a("ts-button",{attrs:{type:"warning"},on:{click:t.handleAddColor}},[t._v("添加花型色卡")])],1),t._v(" "),a("ts-aliupload",{attrs:{fileType:"3",id:"AddColor",multiple:"",maxNum:8},on:{doUpload:t.handleAddColorCards}})],1),t._v(" "),a("ts-row",{attrs:{gutter:10}},t._l(t.ColorList,function(e){return a("ts-col",{attrs:{span:12}},[a("ts-row",{staticClass:"add-dynamic-col"},[a("ts-col",{attrs:{span:7}},[a("ts-image",{staticClass:"add-dynamic-image",attrs:{width:"90",height:"90",src:e.picUrl,canView:!1,disabledHover:""}})],1),t._v(" "),a("ts-col",{attrs:{span:17}},[a("div",{staticClass:"add-dynamic--menu"},[a("ts-tag",{directives:[{name:"show",rawName:"v-show",value:1===e.isMain,expression:"item.isMain===1"}]},[t._v("默认被查找花型")]),t._v(" "),a("ts-button",{directives:[{name:"show",rawName:"v-show",value:1!==e.isMain,expression:"item.isMain!==1"}],staticClass:"add-dynamic--button",attrs:{type:"plain",size:"small"},on:{click:function(a){t.handleSetDefault(e)}}},[t._v("设置被默认查找")]),t._v(" "),a("ts-button",{directives:[{name:"show",rawName:"v-show",value:1!==e.isMain,expression:"item.isMain!==1"}],staticClass:"add-dynamic--button del",attrs:{type:"plain",size:"small"},on:{click:function(a){t.handleDelColor(e)}}},[t._v("删除色卡")])],1),t._v(" "),a("ts-form-item",{staticClass:"add-dynamic",attrs:{"show-message":!1,label:"库存:",labelWidth:"50px"}},[a("ts-radio-group",{on:{change:t.handleSetColorList},model:{value:e.isStock,callback:function(t){e.isStock=t},expression:"item.isStock"}},t._l(t.DICT.isStock,function(e){return a("ts-radio",{key:e.dicValue,attrs:{type:"origin",label:e.dicValue}},[t._v(t._s(e.label))])}))],1),t._v(" "),1===e.isStock?a("ts-form-item",{staticClass:"add-dynamic--input",attrs:{"show-message":!1,labelWidth:"0"}},[a("ts-input",{staticStyle:{width:"48%"},attrs:{size:"small",maxlength:9,placeholder:"请输入库存数量"},on:{input:t.handleSetColorList},model:{value:e.stock,callback:function(t){e.stock="string"==typeof t?t.trim():t},expression:"item.stock"}}),t._v(" "),a("ts-select",{staticStyle:{width:"48%"},attrs:{"data-key-name":"name","data-val-name":"dicValue",placeholder:"选择单位",options:t.unit,size:"small"},on:{change:t.handleSetColorList},model:{value:e.unit,callback:function(t){e.unit=t},expression:"item.unit"}})],1):t._e()],1)],1)],1)}))],1)},staticRenderFns:[]}},954:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ts-form",{ref:"addPatternForm",attrs:{model:t.addPatternForm,rules:t.rules,"label-width":"125px","label-position":"left"}},[a("ts-row",[t.isCreatedStatus?t._e():a("ts-col",{staticClass:"center",attrs:{span:6}},[a("ts-image",{directives:[{name:"show",rawName:"v-show",value:t.Pic.show,expression:"Pic.show"}],attrs:{width:"200",height:"200",src:t.Color.detail.picUrl,canView:!1,disabledHover:""}}),t._v(" "),a("p",[a("br"),t._v(" "),a("small",[t._v("白色的花型更能被查找到哦！")])]),t._v(" "),a("p",[a("small",[t._v("所以请尽量添加"),a("strong",[t._v("白色无干扰")]),t._v("的花型样板")])]),t._v(" "),a("br")],1),t._v(" "),a("ts-col",{staticClass:"add-col",style:{"max-height":t.getClientHeight/1.5+"px"},attrs:{span:t.isCreatedStatus?24:18}},[a("ts-menu-table",[a("div",{slot:"header-left"},[a("strong",[t._v("花型基本信息")])]),t._v(" "),a("ts-form-item",{attrs:{label:"面料种类：",prop:"category"}},[a("ts-radio-group",{attrs:{bordered:""},model:{value:t.addPatternForm.category,callback:function(e){t.addPatternForm.category=e},expression:"addPatternForm.category"}},t._l(t.dicTree.PRODUCT_TYPE,function(e){return a("ts-radio",{key:e.dicValue,attrs:{label:e.dicValue}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("ts-row",[t.isCreatedStatus?t._e():a("ts-col",{attrs:{span:12}},[a("ts-form-item",{attrs:{label:"花型编号：",prop:t.validate?"productNo":""}},[a("ts-input",{attrs:{placeholder:"请输入花型编号"},model:{value:t.addPatternForm.productNo,callback:function(e){t.addPatternForm.productNo=e},expression:"addPatternForm.productNo"}})],1)],1),t._v(" "),a("ts-col",{attrs:{span:12}},[a("ts-form-item",{attrs:{label:"大货类型：",prop:t.validate?"productShape":""}},[a("ts-radio-group",{attrs:{bordered:""},model:{value:t.addPatternForm.productShape,callback:function(e){t.addPatternForm.productShape=e},expression:"addPatternForm.productShape"}},t._l(t.dicTree.PRODUCT_SHAPE,function(e){return a("ts-radio",{key:e.value,attrs:{label:e.dicValue}},[t._v(t._s(e.name))])}))],1)],1)],1),t._v(" "),a("ts-form-item",{attrs:{label:"花型成分：",prop:t.validate?"ingredient":""}},[a("ts-radio-group",{attrs:{bordered:""},model:{value:t.addPatternForm.ingredient,callback:function(e){t.addPatternForm.ingredient=e},expression:"addPatternForm.ingredient"}},[t._l(t.ingredientList,function(e){return a("div",{staticClass:"add-radio"},[a("ts-radio",{key:e.id,attrs:{label:e.ingredientName}},[a("span",{on:{keydown:t.handlePreventInput}},[t._v("\n                "+t._s(e.ingredientName)+"\n                ")])]),t._v(" "),1===e.ingredientType?a("i",{staticClass:"add-radio-close",on:{click:function(a){if(a.target!==a.currentTarget)return null;t.handleDelIngredient(e,"Ingredient")}}},[t._v("×")]):t._e()],1)}),t._v(" "),t._l(t.newIngredients,function(e,r){return a("div",{staticClass:"add-radio"},[a("ts-radio",{attrs:{label:e.ingredientName}},[a("span",{on:{keydown:t.handlePreventInput}},[t._v("\n                "+t._s(e.ingredientName)+"  ")])]),t._v(" "),a("i",{staticClass:"add-radio-close",on:{click:function(a){if(a.target!==a.currentTarget)return null;t.handleDelIngredient(e,"newIngredient")}}},[t._v("×")])],1)}),t._v(" "),a("ts-input",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleAddIngredient,expression:"handleAddIngredient"}],staticClass:"add-input",attrs:{validateEvent:!1,placeholder:"自定义成分",maxlength:8,size:"small"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.handleAddIngredient(e)}},model:{value:t.EditIngredient.newIngredient,callback:function(e){t.EditIngredient.newIngredient=e},expression:"EditIngredient.newIngredient"}})],2)],1),t._v(" "),a("ts-form-item",{directives:[{name:"show",rawName:"v-show",value:t.hasUserCategory,expression:"hasUserCategory"}],attrs:{label:"花型分类："}},[a("ts-radio-group",{attrs:{bordered:""},model:{value:t.addPatternForm.classId,callback:function(e){t.addPatternForm.classId=e},expression:"addPatternForm.classId"}},t._l(t.userCategory,function(e){return a("ts-radio",{attrs:{label:e.id}},[t._v(t._s(e.className))])}))],1),t._v(" "),t.isCreatedStatus?t._e():a("div",[a("ts-row",{attrs:{gutter:5}},[a("ts-col",{attrs:{span:12}},[a("ts-form-item",{attrs:{label:"幅宽：",prop:"width"}},[a("ts-input",{attrs:{maxlength:10,placeholder:"请输入幅宽"},model:{value:t.addPatternForm.width,callback:function(e){t.addPatternForm.width=e},expression:"addPatternForm.width"}},[a("span",{slot:"append"},[t._v("CM")])])],1)],1),t._v(" "),a("ts-col",{attrs:{span:12}},[a("ts-form-item",{attrs:{label:"花高：",prop:"height"}},[a("ts-input",{attrs:{maxlength:10,placeholder:"请输入花高"},model:{value:t.addPatternForm.height,callback:function(e){t.addPatternForm.height=e},expression:"addPatternForm.height"}},[a("span",{slot:"append"},[t._v("CM")])])],1)],1)],1),t._v(" "),a("ts-row",{attrs:{gutter:10}},[a("ts-col",{attrs:{span:12}},[a("ts-form-item",{attrs:{label:"剪版价：",prop:"cutPrice"}},[a("ts-input",{staticStyle:{width:"50%"},attrs:{maxlength:9,placeholder:"请输入单价"},model:{value:t.cutPrice,callback:function(e){t.cutPrice=e},expression:"cutPrice"}}),t._v(" "),a("ts-select",{staticStyle:{width:"48%"},attrs:{"data-key-name":"name","data-val-name":"dicValue",placeholder:"选择单位",options:t.CopyDICTUnit},model:{value:t.addPatternForm.priceUnit,callback:function(e){t.addPatternForm.priceUnit=e},expression:"addPatternForm.priceUnit"}})],1)],1),t._v(" "),a("ts-col",{attrs:{span:12}},[a("ts-form-item",{attrs:{label:"大货价：",prop:"price"}},[a("ts-input",{staticStyle:{width:"50%"},attrs:{maxlength:9,placeholder:"请输入单价"},model:{value:t.prince,callback:function(e){t.prince=e},expression:"prince"}}),t._v(" "),a("ts-select",{staticStyle:{width:"48%"},attrs:{"data-key-name":"name","data-val-name":"dicValue",placeholder:"选择单位",options:t.CopyDICTUnit},model:{value:t.addPatternForm.priceUnit,callback:function(e){t.addPatternForm.priceUnit=e},expression:"addPatternForm.priceUnit"}})],1)],1)],1),t._v(" "),a("ts-row",[a("ts-col",{attrs:{span:12}},[a("ts-form-item",{attrs:{label:"出码率：",prop:"outRate"}},[a("ts-input",{attrs:{maxlength:10,placeholder:"请输入出码率"},model:{value:t.addPatternForm.outRate,callback:function(e){t.addPatternForm.outRate=e},expression:"addPatternForm.outRate"}})],1)],1)],1)],1)],1),t._v(" "),t.isCreatedStatus?t._e():a("add-color",{attrs:{ColorList:t.Color.list,product:t.addPatternForm,unit:t.CopyDICTUnit},on:{setColorList:t.getColorList,saveColor:t.handleSaveColor}})],1)],1)],1),t._v(" "),a("div",{staticClass:"add-bottom-button"},[a("ts-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("addPatternForm")}}},[t._v(t._s(t.isCreatedStatus?"批量上传图片":"保存修改"))]),t._v(" "),t.upLace?a("ts-button",{attrs:{type:"plain"},on:{click:function(e){t.handleUplace("addPatternForm")}},slot:"footer"},[t._v(t._s(t.addPatternForm.isShelve?"下架蕾丝控":"上架蕾丝控"))]):t._e()],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=13.2907ee1f07cb043edbbb.js.map