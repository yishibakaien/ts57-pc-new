webpackJsonp([29],{1052:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(105),i=a.n(n),s=a(155),o=a.n(s),r=a(30),d=a.n(r),c=a(29),u=a.n(c),l=a(28);t.default={data:function(){return{Params:{pageNo:0,pageSize:10},addForm:{machineNo:"",machineType:""},rules:{machineNo:{message:"请输入设备针数",required:!0},machineType:{message:"请输入设备疏节",required:!0}},Equipment:{},Dialog:{status:"create",add:!1}}},created:function(){this.Params.pageNo=1},watch:{Params:{handler:function(e){var t=this;return u()(d.a.mark(function n(){return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.i(l.Q)(e);case 2:t.Equipment=n.sent.data.data;case 3:case"end":return n.stop()}},n,t)}))()},deep:!0},Equipment:{handler:function(e){!e.list.length&&this.Params.pageNo>=0&&this.Params.pageNo--},deep:!0}},computed:{hasEquipment:function(){if(this.Equipment.list)return this.Equipment.list.length>0}},methods:{handleAdd:function(e){this.Dialog.status="create",this.Dialog.add=!0,this.$refs[e]&&(this.addForm={machineNo:"",machineType:""})},hanleEdit:function(e){this.Dialog.add=!0,this.Dialog.status="edit",this.addForm=JSON.parse(o()(e))},handleDel:function(e){var t=this;this.$messagebox.confirm("确认要删除该设备吗？").then(u()(d.a.mark(function n(){return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.i(l.R)({ids:[e.id]});case 2:return n.next=4,a.i(l.Q)(t.Params);case 4:t.Equipment=n.sent.data.data;case 5:case"end":return n.stop()}},n,t)})))},submitForm:function(e,t){this.$refs[e].validate(function(e){if(!e)return!1;t()})},handleReset:function(e){this.$refs[e].resetFields()},handleSave:function(e){var t=this;this.submitForm(e,u()(d.a.mark(function e(){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("create"!==t.Dialog.status){e.next=6;break}return e.next=3,a.i(l.S)(t.addForm);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,a.i(l.T)(t.addForm=i()({},t.addForm,{id:t.addForm.id}));case 8:e.t0=e.sent;case 9:if(n=e.t0,n.data.code){e.next=15;break}return t.Dialog.add=!1,e.next=14,a.i(l.Q)(t.Params);case 14:t.Equipment=e.sent.data.data;case 15:case"end":return e.stop()}},e,t)})))},handleSaveAndAdd:function(e){var t=this;this.submitForm(e,u()(d.a.mark(function n(){var i;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.i(l.S)(t.addForm);case 2:if(i=n.sent,i.data.code){n.next=8;break}return t.$refs[e].resetFields(),n.next=7,a.i(l.Q)(t.Params);case 7:t.Equipment=n.sent.data.data;case 8:case"end":return n.stop()}},n,t)})))},handleChangeCurrent:function(e){var t=this;return u()(d.a.mark(function a(){return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.Params.pageNo=e;case 1:case"end":return a.stop()}},a,t)}))()},handleChangePageSize:function(e){var t=this;return u()(d.a.mark(function a(){return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.Params.pageSize=e;case 1:case"end":return a.stop()}},a,t)}))()}}}},1145:function(e,t,a){t=e.exports=a(830)(),t.push([e.i,".equipment-list-footer[data-v-648108f8]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:-moz-box;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;-moz-box-pack:justify;justify-content:space-between;margin-top:10px}.equipment-notice[data-v-648108f8]{text-align:center;line-height:40px}.equipment-notice p[data-v-648108f8]:first-of-type{font-size:18px;font-weight:700}.equipment-notice p[data-v-648108f8]:nth-of-type(2){color:#999}.equipment-dialog--footer[data-v-648108f8]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:-moz-box;display:flex;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around}","",{version:3,sources:["/Users/hezhicheng/ts57_PC/src/pages/shopManager/children/equipment.vue"],names:[],mappings:"AAEA,wCACI,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,iBAAkB,AAClB,aAAc,AACd,yBAA0B,AAC1B,sCAAuC,AACnC,sBAAuB,AAChB,sBAAuB,AAC1B,8BAA+B,AACvC,eAAiB,CACpB,AACD,mCACI,kBAAmB,AACnB,gBAAkB,CACrB,AAED,mDACI,eAAgB,AAChB,eAAiB,CACpB,AACD,oDACI,UAAY,CACf,AAED,2CACI,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,iBAAkB,AAClB,aAAc,AACd,qCAAsC,AAClC,yBAA0B,AACtB,4BAA8B,CACzC",file:"equipment.vue",sourcesContent:["\n.equipment-list[data-v-648108f8] {}\n.equipment-list-footer[data-v-648108f8] {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: -moz-box;\n    display: flex;\n    -webkit-box-pack: justify;\n    -webkit-justify-content: space-between;\n        -ms-flex-pack: justify;\n               -moz-box-pack: justify;\n            justify-content: space-between;\n    margin-top: 10px;\n}\n.equipment-notice[data-v-648108f8] {\n    text-align: center;\n    line-height: 40px;\n}\n.equipment-notice p[data-v-648108f8] {}\n.equipment-notice p[data-v-648108f8]:nth-of-type(1) {\n    font-size: 18px;\n    font-weight: 700;\n}\n.equipment-notice p[data-v-648108f8]:nth-of-type(2) {\n    color: #999;\n}\n.equipment-dialog[data-v-648108f8] {}\n.equipment-dialog--footer[data-v-648108f8] {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: -moz-box;\n    display: flex;\n    -webkit-justify-content: space-around;\n        -ms-flex-pack: distribute;\n            justify-content: space-around;\n}\n"],sourceRoot:""}])},1256:function(e,t,a){var n=a(1145);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(831)("10f80fc4",n,!0)},1403:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"equipment"},[a("ts-section",[a("div",{slot:"menu"},[a("ts-button",{attrs:{type:"primary"},on:{click:function(t){e.handleAdd("addForm")}}},[e._v("添加设备")])],1),e._v(" "),e.hasEquipment?a("div",{staticClass:"equipment-list"},[a("ts-table",{attrs:{data:e.Equipment.list}},[a("ts-column",{attrs:{"data-key":"machineType",width:"40%",align:"center",name:"设备疏节"},slot:"default"}),e._v(" "),a("ts-column",{attrs:{"data-key":"machineNo",width:"40%",align:"center",name:"设备针数"},slot:"default"}),e._v(" "),a("ts-column",{attrs:{align:"center",name:"操作",action:"[{'text':'修改','func':'hanleEdit'},{'text':'删除','func':'handleDel'}]"},slot:"default"})],1),e._v(" "),a("div",{staticClass:"equipment-list-footer",slot:"footer"},[e._v("\n        一共有"+e._s(e.Equipment.totalNum)+"台设备\n        "),a("ts-pagination",{staticClass:"equipment-list-footer--pagation",attrs:{current:e.Equipment.pageNO,total:e.Equipment.totalPage},on:{change:e.handleChangeCurrent,"page-size-change":e.handleChangePageSize}})],1)],1):a("div",{staticClass:"equipment-notice"},[a("p",[e._v("您还未添加公司设备信息，点击右上角按钮可添加设备信息")]),e._v(" "),a("p",[e._v("温馨提示：您添加的设备信息将同步至平台厂家设备库")])])]),e._v(" "),a("ts-dialog",{attrs:{title:"添加公司车间设备信息",width:"30%"},on:{confirm:e.hanleVisitStore,close:function(t){e.handleReset("addForm")}},model:{value:e.Dialog.add,callback:function(t){e.Dialog.add=t},expression:"Dialog.add"}},[a("ts-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,inline:"","label-width":"100px"}},[a("ts-form-item",{attrs:{label:"设备疏节",prop:"machineType"}},[a("ts-input",{model:{value:e.addForm.machineType,callback:function(t){e.addForm.machineType=t},expression:"addForm.machineType"}})],1),e._v(" "),a("ts-form-item",{attrs:{label:"设备针数",prop:"machineNo"}},[a("ts-input",{model:{value:e.addForm.machineNo,callback:function(t){e.addForm.machineNo=t},expression:"addForm.machineNo"}})],1)],1),e._v(" "),a("div",{staticClass:"equipment-dialog--footer"},[a("ts-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSave("addForm")}}},[e._v("保存")]),e._v(" "),"create"===e.Dialog.status?a("ts-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSaveAndAdd("addForm")}}},[e._v("保存并继续添加")]):e._e()],1),e._v(" "),a("div",{slot:"footer"})],1)],1)},staticRenderFns:[]}},887:function(e,t,a){a(1256);var n=a(1)(a(1052),a(1403),"data-v-648108f8",null);e.exports=n.exports}});
//# sourceMappingURL=29.3fab4fad3ac6b7c69355.js.map